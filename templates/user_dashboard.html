{% extends "base.html" %}
{% block content %}

<div class="app-shell">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <span>Ops Platform</span>
    </div>

    <nav>
      <a class="active" href="#">Dashboard</a>
      <a href="#">My Requests</a>
      <a href="#">Notifications</a>     <!-- placeholder -->
      <a href="#">Profile</a>           <!-- placeholder -->
      <a href="#">Settings</a>          <!-- placeholder -->

      <!-- LOGOUT (POST, not GET) -->
      <form method="POST" action="{{ url_for('auth.logout') }}">
        <button type="submit" class="link-btn">Logout</button>
      </form>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="app-content">
    <div class="container">

      <!-- Header -->
      <div class="card">
        <h2 style="margin:0;">{{ labels.title }}</h2>
        <div class="muted">Signed in as {{ user["email"] }}</div>
      </div>

      <!-- Status summary -->
      <div class="card">
        <span class="badge pending">Pending</span>
        <span class="badge approved" style="margin-left:8px;">Approved</span>
        <span class="badge denied" style="margin-left:8px;">Denied</span>
      </div>

      <!-- Requests table -->
      <h3 style="margin: 12px 0;">Recent Requests</h3>
      <table>
        <thead>
          <tr>
            <th>Request</th>
            <th>Category</th>
            <th>Status</th>
            <th>Submitted</th>
          </tr>
        </thead>
        <tbody>
          {% for r in my_requests %}
          <tr>
            <td>{{ r["request_type"] }}</td>
            <td>{{ r["category"] }}</td>
            <td>
              {% set s = r["status"] %}
              <span class="badge {{ s }}">{{ s }}</span>
            </td>
            <td class="muted">{{ r["created_at"] }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="4" class="muted">
              No requests yet. Submit one to get started.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Submit request -->
      <div class="card" style="margin-top:16px;">
        <form method="POST" action="{{ url_for('requests.create_request') }}">
          <input name="request_type" placeholder="Request type (e.g. VPN Access)" required />
          <select name="category" required>
            <option value="">Select category</option>
            <option value="Access">Access</option>
            <option value="Hardware">Hardware</option>
            <option value="Software">Software</option>
          </select>
          <button type="submit">Submit Request</button>
        </form>
      </div>

    </div>
  </main>

</div>

{% endblock %}


